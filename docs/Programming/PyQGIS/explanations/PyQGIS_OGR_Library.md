# ­ЪЊџ PyQGIS-рЃерЃў OGR рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃљ

рЃћрЃА рЃЊрЃЮрЃЎрЃБрЃЏрЃћрЃюрЃбрЃў рЃЏрЃўрЃќрЃюрЃљрЃЊ рЃўрЃАрЃљрЃ«рЃљрЃЋрЃА **OGR рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃўрЃА** (Open Geospatial Consortium Simple Features Reading/Writing) рЃерЃћрЃАрЃгрЃљрЃЋрЃџрЃљрЃА **PyQGIS-рЃўрЃА** рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃерЃў.  
OGR рЃљрЃарЃўрЃА **GDAL-рЃўрЃА (Geospatial Data Abstraction Library)** рЃюрЃљрЃгрЃўрЃџрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА рЃЋрЃћрЃЦрЃбрЃЮрЃарЃБрЃџрЃў GIS рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃЋрЃљрЃА, рЃЏрЃљрЃюрЃўрЃърЃБрЃџрЃљрЃфрЃўрЃљрЃАрЃљ рЃЊрЃљ рЃЕрЃљрЃгрЃћрЃарЃљрЃА рЃЏрЃарЃљрЃЋрЃљрЃџ рЃцрЃЮрЃарЃЏрЃљрЃбрЃерЃў.  

PyQGIS-рЃерЃў OGR рЃўрЃюрЃбрЃћрЃњрЃарЃўрЃарЃЊрЃћрЃЉрЃљ **QgsVectorLayer**-рЃўрЃАрЃљ рЃЊрЃљ **QgsVectorFileWriter**-рЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ, рЃарЃљрЃф рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃўрЃФрЃџрЃћрЃЋрЃљ QGIS-рЃўрЃА рЃАрЃЎрЃарЃўрЃърЃбрЃћрЃЉрЃерЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃљ.  

рЃћрЃА рЃЏрЃљрЃАрЃљрЃџрЃљ рЃњрЃљрЃюрЃЎрЃБрЃЌрЃЋрЃюрЃўрЃџрЃўрЃљ **рЃАрЃбрЃБрЃЊрЃћрЃюрЃбрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА**: рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃЌрЃћрЃЮрЃарЃўрЃБрЃџ рЃњрЃљрЃюрЃЏрЃљрЃарЃбрЃћрЃЉрЃћрЃЉрЃА, рЃЎрЃЮрЃЊрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃћрЃЉрЃА рЃЊрЃљ рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃБрЃџ рЃЊрЃљрЃЋрЃљрЃџрЃћрЃЉрЃћрЃЉрЃА.  
­ЪЉЅ рЃарЃћрЃЎрЃЮрЃЏрЃћрЃюрЃЊрЃћрЃЉрЃБрЃџрЃўрЃљ **QGIS 3.28+** рЃЋрЃћрЃарЃАрЃўрЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃљ рЃЊрЃљ **Python Console** (Plugins > Python Console).  

---

## ­Ъћ╣ рЃерЃћрЃАрЃљрЃЋрЃљрЃџрЃў OGR-рЃерЃў

### рЃарЃљ рЃљрЃарЃўрЃА OGR?
- рЃЏрЃ«рЃљрЃарЃА рЃБрЃГрЃћрЃарЃА **400+ рЃЋрЃћрЃЦрЃбрЃЮрЃарЃБрЃџ рЃцрЃЮрЃарЃЏрЃљрЃбрЃА** (Shapefile, GeoJSON, GeoPackage, KML рЃЊрЃљ рЃАрЃ«рЃЋ.).  
- рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ PyQGIS-рЃерЃў рЃЋрЃћрЃЦрЃбрЃЮрЃарЃБрЃџрЃў рЃцрЃћрЃюрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃљрЃЦрЃЏрЃюрЃћрЃџрЃљрЃЊ рЃЊрЃљ рЃАрЃљрЃЏрЃљрЃарЃЌрЃљрЃЋрЃљрЃЊ.  

### рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃЎрЃџрЃљрЃАрЃћрЃЉрЃў:
- **QgsVectorLayer** РђЊ рЃЋрЃћрЃЦрЃбрЃЮрЃарЃБрЃџрЃў рЃцрЃћрЃюрЃўрЃА рЃгрЃљрЃарЃЏрЃЮрЃЊрЃњрЃћрЃюрЃљ.  
- **QgsFeature** РђЊ рЃцрЃћрЃюрЃўрЃА рЃћрЃарЃЌрЃћрЃБрЃџрЃў рЃћрЃџрЃћрЃЏрЃћрЃюрЃбрЃў (рЃњрЃћрЃЮрЃЏрЃћрЃбрЃарЃўрЃљ + рЃљрЃбрЃарЃўрЃЉрЃБрЃбрЃћрЃЉрЃў).  
- **QgsVectorFileWriter** РђЊ рЃцрЃљрЃўрЃџрЃерЃў рЃЕрЃљрЃгрЃћрЃарЃљ OGR рЃЊрЃарЃљрЃўрЃЋрЃћрЃарЃћрЃЉрЃўрЃЌ.  

---

## ­Ъџђ рЃарЃљрЃбрЃЮрЃЏ рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃДрЃћрЃюрЃЮрЃЌ OGR PyQGIS-рЃерЃў?

- **рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃљ** РђЊ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃЕрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ, рЃњрЃљрЃарЃЊрЃљрЃЦрЃЏрЃюрЃљ, рЃцрЃўрЃџрЃбрЃарЃљрЃфрЃўрЃљ.  
- **рЃЎрЃЮрЃюрЃЋрЃћрЃарЃАрЃўрЃљ** РђЊ рЃцрЃЮрЃарЃЏрЃљрЃбрЃўрЃЊрЃљрЃю рЃцрЃЮрЃарЃЏрЃљрЃбрЃерЃў рЃњрЃљрЃЊрЃљрЃДрЃЋрЃљрЃюрЃљ (рЃЏрЃљрЃњ.: Shapefile Рєњ GeoJSON).  

### рЃърЃарЃћрЃарЃћрЃЎрЃЋрЃўрЃќрЃўрЃбрЃћрЃЉрЃў:
```py
from qgis.core import *
```

---

## ­ЪДЕ OGR-рЃўрЃА рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃЎрЃЮрЃюрЃфрЃћрЃцрЃфрЃўрЃћрЃЉрЃў

- **рЃњрЃћрЃЮрЃЏрЃћрЃбрЃарЃўрЃљ**: Point, LineString, Polygon.  
- **рЃљрЃбрЃарЃўрЃЉрЃБрЃбрЃћрЃЉрЃў**: рЃфрЃ«рЃарЃўрЃџрЃўрЃА рЃЋрЃћрЃџрЃћрЃЉрЃў (рЃЏрЃљрЃњ.: ID, рЃАрЃљрЃ«рЃћрЃџрЃў).  
- **CRS (Coordinate Reference System)**: EPSG рЃЎрЃЮрЃЊрЃћрЃЉрЃў (рЃЏрЃљрЃњ.: EPSG:4326 WGS84).  

---

## ­ЪЊѓ OGR рЃЊрЃарЃљрЃўрЃЋрЃћрЃарЃћрЃЉрЃў PyQGIS-рЃерЃў

рЃЊрЃарЃљрЃўрЃЋрЃћрЃарЃћрЃЉрЃў рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃљрЃЋрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃцрЃЮрЃарЃЏрЃљрЃбрЃА. рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃњрЃљрЃЋрЃарЃфрЃћрЃџрЃћрЃЉрЃБрЃџрЃў:

| рЃЊрЃарЃљрЃўрЃЋрЃћрЃарЃў | рЃцрЃЮрЃарЃЏрЃљрЃбрЃў       | рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў рЃцрЃљрЃўрЃџрЃўрЃА рЃњрЃљрЃцрЃљрЃарЃЌрЃЮрЃћрЃЉрЃљ |
|----------|--------------|---------------------------|
| ESRI Shapefile | Shapefile    | `.shp` |
| GeoJSON        | GeoJSON      | `.geojson` |
| GPKG           | GeoPackage   | `.gpkg` |
| CSV            | CSV (WKT)    | `.csv` |
| KML            | KML          | `.kml` |

­ЪЉЅ `driverName` рЃБрЃюрЃЊрЃљ рЃЏрЃўрЃБрЃЌрЃўрЃЌрЃЮрЃЌ рЃцрЃљрЃўрЃџрЃўрЃА рЃЕрЃљрЃгрЃћрЃарЃўрЃАрЃљрЃА.

---

## ­ЪЊЦ рЃЋрЃћрЃЦрЃбрЃЮрЃарЃБрЃџрЃў рЃцрЃћрЃюрЃўрЃА рЃЕрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ (Reading)

```py
from qgis.core import QgsVectorLayer, QgsProject

layer_path = "/path/to/your/data/airports.shp"
vlayer = QgsVectorLayer(layer_path, "Aeroporti", "ogr")

if not vlayer.isValid():
    print("рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃцрЃћрЃюрЃљ рЃЋрЃћрЃа рЃЕрЃљрЃўрЃбрЃЋрЃўрЃарЃЌрЃљ!")
else:
    QgsProject.instance().addMapLayer(vlayer)
    print("рЃцрЃћрЃюрЃљ рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌ рЃЕрЃљрЃўрЃбрЃЋрЃўрЃарЃЌрЃљ.")
```

- **ogr** РђЊ рЃЏрЃўрЃБрЃЌрЃўрЃЌрЃћрЃЉрЃА OGR рЃърЃарЃЮрЃЋрЃљрЃўрЃЊрЃћрЃарЃА.  
- **isValid()** РђЊ рЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃА рЃцрЃћрЃюрЃўрЃА рЃАрЃўрЃАрЃгрЃЮрЃарЃћрЃА.  

---

## ­Ъћј рЃцрЃћрЃюрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЎрЃЋрЃџрЃћрЃЋрЃљ (Iteration)

```py
features = vlayer.getFeatures()

for feature in features:
    geom = feature.geometry()
    attrs = feature.attributes()
    print(f"ID: {feature.id()}")
    if geom.type() == 0:  # Point
        print(f"рЃЎрЃЮрЃЮрЃарЃЊрЃўрЃюрЃљрЃбрЃћрЃЉрЃў: {geom.asPoint()}")
    print(f"рЃљрЃбрЃарЃўрЃЉрЃБрЃбрЃћрЃЉрЃў: {attrs}")
    break
```

- **getFeatures()** РђЊ рЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃўрЃА рЃўрЃбрЃћрЃарЃљрЃбрЃЮрЃарЃА.  
- **geometry().asPoint()** РђЊ рЃЎрЃЮрЃЮрЃарЃЊрЃўрЃюрЃљрЃбрЃћрЃЉрЃў Point-рЃўрЃАрЃЌрЃЋрЃўрЃА.  

---

## ­Ъј» рЃцрЃўрЃџрЃбрЃарЃљрЃфрЃўрЃљ (рЃАрЃўрЃЋрЃарЃфрЃБрЃџрЃў рЃЊрЃљ рЃљрЃбрЃарЃўрЃЉрЃБрЃбрЃБрЃџрЃў)

```py
from qgis.core import QgsRectangle, QgsFeatureRequest

roi = QgsRectangle(450290, 400520, 450750, 400780)
request = QgsFeatureRequest().setFilterRect(roi)

request = QgsFeatureRequest().setFilterExpression("name = 'Tbilisi'")

for feature in vlayer.getFeatures(request):
    print(f"рЃерЃћрЃбрЃљрЃюрЃўрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ: {feature['name']}")
```

---

## ­ЪњЙ рЃЋрЃћрЃЦрЃбрЃЮрЃарЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃЕрЃљрЃгрЃћрЃарЃљ (Writing)

```py
from qgis.core import QgsVectorFileWriter, QgsProject

save_options = QgsVectorFileWriter.SaveVectorOptions()
save_options.driverName = "GPKG"
save_options.fileEncoding = "UTF-8"

transform_context = QgsProject.instance().transformContext()

output_path = "/path/to/output/my_data.gpkg"
error = QgsVectorFileWriter.writeAsVectorFormatV3(
    vlayer, output_path, transform_context, save_options
)

if error[0] == QgsVectorFileWriter.NoError:
    print("рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌ рЃерЃћрЃюрЃљрЃ«рЃБрЃџрЃў!")
else:
    print(f"рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: {error}")
```

- **driverName** РђЊ рЃцрЃЮрЃарЃЏрЃљрЃбрЃў (рЃЏрЃљрЃњ.: `"ESRI Shapefile"`).  
- **writeAsVectorFormatV3** РђЊ рЃЕрЃљрЃгрЃћрЃарЃўрЃА рЃЌрЃљрЃюрЃљрЃЏрЃћрЃЊрЃарЃЮрЃЋрЃћ рЃЏрЃћрЃЌрЃЮрЃЊрЃў.  

---

## ­ЪєЋ рЃљрЃ«рЃљрЃџрЃў рЃцрЃћрЃюрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ рЃюрЃБрЃџрЃўрЃЊрЃљрЃю

```py
from qgis.PyQt.QtCore import QVariant
from qgis.core import QgsFields, QgsField, QgsFeature, QgsGeometry, QgsPointXY

fields = QgsFields()
fields.append(QgsField("ID", QVariant.Int))
fields.append(QgsField("рЃАрЃљрЃ«рЃћрЃџрЃў", QVariant.String))

new_layer = QgsVectorLayer(
    "Point?crs=epsg:4326&field=ID:integer&field=рЃАрЃљрЃ«рЃћрЃџрЃў:string",
    "рЃљрЃ«рЃљрЃџрЃў_рЃцрЃћрЃюрЃљ", "memory"
)
new_layer.dataProvider().addFeatures([])

feat = QgsFeature(new_layer.fields())
feat.setAttribute("ID", 1)
feat.setAttribute("рЃАрЃљрЃ«рЃћрЃџрЃў", "рЃЌрЃЉрЃўрЃџрЃўрЃАрЃў")
feat.setGeometry(QgsGeometry.fromPointXY(QgsPointXY(44.7937, 41.7151)))
new_layer.dataProvider().addFeature(feat)

save_options.driverName = "ESRI Shapefile"
QgsVectorFileWriter.writeAsVectorFormatV3(new_layer, "/path/to/new.shp", transform_context, save_options)
```

---

## ­ЪЊЮ рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃБрЃџрЃў рЃЊрЃљрЃЋрЃљрЃџрЃћрЃЉрЃћрЃЉрЃў

1. рЃЕрЃљрЃЏрЃЮрЃбрЃЋрЃўрЃарЃЌрЃћрЃЌ Natural Earth Shapefiles, рЃЕрЃљрЃбрЃЋрЃўрЃарЃЌрЃћрЃЌ PyQGIS-рЃерЃў рЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃљрЃџрЃћрЃЌ рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ:  
```py
print(f"рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ: {vlayer.featureCount()}")
```

2. рЃерЃћрЃЦрЃЏрЃћрЃюрЃўрЃЌ рЃљрЃ«рЃљрЃџрЃў Point рЃцрЃћрЃюрЃљ рЃЌрЃЉрЃўрЃџрЃўрЃАрЃўрЃА рЃЎрЃЮрЃЮрЃарЃЊрЃўрЃюрЃљрЃбрЃћрЃЉрЃўрЃЌ рЃЊрЃљ рЃерЃћрЃўрЃюрЃљрЃ«рЃћрЃЌ **GeoJSON**-рЃљрЃЊ.  

3. рЃњрЃљрЃцрЃўрЃџрЃбрЃарЃћрЃЌ рЃцрЃћрЃюрЃљ CRS-рЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ рЃЊрЃљ рЃерЃћрЃўрЃюрЃљрЃ«рЃћрЃЌ рЃљрЃ«рЃљрЃџ рЃцрЃЮрЃарЃЏрЃљрЃбрЃерЃў:  
```py
print(layer.crs().authid())
```

---

## Рџа рЃерЃћрЃфрЃЊрЃЮрЃЏрЃћрЃЉрЃў рЃЊрЃљ рЃарЃЕрЃћрЃЋрЃћрЃЉрЃў

- **"Layer not valid"** РђЊ рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ рЃцрЃљрЃўрЃџрЃўрЃА рЃњрЃќрЃљ рЃЊрЃљ рЃцрЃЮрЃарЃЏрЃљрЃбрЃў.  
- рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЌ **QGIS Python Console** рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА.  
- рЃЏрЃћрЃбрЃў рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃўрЃАрЃЌрЃЋрЃўрЃА: **QGIS PyQGIS Cookbook**.  

---

## ­ЪЊџ рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌрЃў рЃарЃћрЃАрЃБрЃарЃАрЃћрЃЉрЃў

- [QGIS PyQGIS Developer Cookbook](https://docs.qgis.org)  
- [GDAL Vector Drivers](https://gdal.org/drivers/vector/index.html)  
